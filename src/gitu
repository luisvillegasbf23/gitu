#!/bin/sh
GITU_ROOT="$(cd "$(dirname "$0")" && pwd)"
cmd="${1:-}"

show_help() {
  echo "gitu - quick git commands"
  echo ""
  echo "Usage:"
  echo "  gitu                    Show this help"
  echo "  gitu push <branch> <message> <file> [file2 ...]   Add, commit and push"
  echo "  gitu clean              Switch to master/main and delete all other local branches"
  echo "  gitu who                Show current git user and remote"
  echo "  gitu uninstall          Remove gitu from this machine"
  echo ""
}

for c in push clean who uninstall; do
  if [ "$cmd" = "$c" ]; then
    shift
    exec "$GITU_ROOT/commands/$c.sh" "$@"
  fi
done

case "$cmd" in
  ""|help|--help|-h)
    show_help
    ;;
  *)
    echo "Unknown command: $cmd"
    echo ""
    show_help
    exit 1
    ;;
esac
